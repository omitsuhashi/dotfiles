prefix_rule(pattern=["rm", "-rf", "cmd/http-api", "cmd/projection-worker", "cmd/eventbridge-publisher", "cmd/checkout-expirer", "cmd/checkout-trade-bridge", "cmd/checkout-trade-lambda", "cmd/cognito-hooks"], decision="allow")
prefix_rule(pattern=["rm", "-rf", "tmp/gomodcache"], decision="allow")
prefix_rule(pattern=["rm", "-rf", ".gocache"], decision="allow")
prefix_rule(pattern=["make", "api"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/checkout/adapter/http"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/workflow/checkouttrade"], decision="allow")
prefix_rule(pattern=["rm", "-rf", "crates/dgm-core"], decision="allow")
prefix_rule(pattern=["make", "oapi-generate"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/org/..."], decision="allow")
prefix_rule(pattern=["rm", "-f", "tmp_example.dgm"], decision="allow")
prefix_rule(pattern=["pnpm", "api:generate"], decision="allow")
prefix_rule(pattern=["make", "internal/gen/checkout/.oapi.stamp"], decision="allow")
prefix_rule(pattern=["make", "-B", "internal/gen/checkout/.oapi.stamp"], decision="allow")
prefix_rule(pattern=["rm", "-f", "src/app/t/[tenantSlug]/analytics/page.tsx", "src/app/t/[tenantSlug]/pricing/page.tsx", "src/app/t/[tenantSlug]/warehouse/page.tsx", "src/app/t/[tenantSlug]/planning/page.tsx", "src/app/t/[tenantSlug]/delivery/page.tsx", "src/app/t/[tenantSlug]/inventory/page.tsx", "src/app/t/[tenantSlug]/products/lab/page.tsx", "src/app/t/[tenantSlug]/commerce/seller-select/page.tsx"], decision="allow")
prefix_rule(pattern=["rm", "-f", "src/features/cart/components/SellerSelectScreen.tsx"], decision="allow")
prefix_rule(pattern=["rm", "-rf", "src/features/inventory"], decision="allow")
prefix_rule(pattern=["pnpm", "add", "-D", "eslint-plugin-boundaries", "--store-dir", "/Users/omitsuhashi/Library/pnpm/store/v10"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/platform/http/middleware"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/auth/application/query", "./internal/auth/adapter/http/middleware"], decision="allow")
prefix_rule(pattern=["rm", "-rf", "pages"], decision="allow")
prefix_rule(pattern=["go", "test", "./..."], decision="allow")
prefix_rule(pattern=["go", "test", "./..."], decision="allow")
prefix_rule(pattern=["rm", "-rf", "src/components"], decision="allow")
prefix_rule(pattern=["rm", "-rf", "src/hooks"], decision="allow")
prefix_rule(pattern=["rm", "-f", "src/lib/api-client.ts", "src/lib/server/api.ts", "src/lib/server/auth.ts"], decision="allow")
prefix_rule(pattern=["rm", "-rf", "src/lib"], decision="allow")
prefix_rule(pattern=["rm", "-rf", "src/contexts"], decision="allow")
prefix_rule(pattern=["rm", "-rf", "src/shared/ui/ui"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/platform/authz"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/auth/application/command", "-run", "TestCompleteAuth_DevEnv_NoFallbackWithoutSubEmail"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/auth/application/command", "-run", "TestCompleteAuth_EmailLinkedToDifferentSubReturnsError"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/smartra"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/platform/http/httputil", "-run", "TestClientIPFromRequest"], decision="allow")
prefix_rule(pattern=["wire", "./internal/auth/di"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/auth/infra/idp/oidcclient"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/auth/infra/idp/jwks"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/auth/infra/idp/keycloak", "./internal/auth/infra/idp/oidcclient"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/auth/..."], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/auth/infra/idp/...", "./internal/auth/application/command"], decision="allow")
prefix_rule(pattern=["go", "get", "github.com/alexedwards/scs/v2@latest", "github.com/alexedwards/scs/pgxstore@latest"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/platform/http/httputil"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/auth/application/...", "./internal/auth/adapter/http/middleware"], decision="allow")
prefix_rule(pattern=["git", "fetch"], decision="allow")
prefix_rule(pattern=["mkdir", "-p", "/Users/omitsuhashi/repos/the3/smartra/scripts/cedar"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/auth/adapter/http/middleware", "./internal/inventory/adapter/http"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/inventory/application/command", "-run", "TestCreateReservationHandler"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/org/adapter/http", "-run", "TenantCapabilities"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/dispatch/domain"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/dispatch/application/query"], decision="allow")
prefix_rule(pattern=["/bin/zsh", "-lc", "python3 - <<'PY'\nfrom pathlib import Path\npath = Path('internal/platform/seed/config.go')\ntext = path.read_text()\ntext = text.replace('path/filepath\"\\n\\tstrings\"\\n', 'path/filepath\"\\n\\tstrconv\"\\n\\tstrings\"\\n')\ntext = text.replace('\\tCapacityKg         int    `toml:\"capacity_kg\"`\\n}\\n', '\\tCapacityKg         int    `toml:\"capacity_kg\"`\\n\\tcapacityKgRaw      string\\n}\\n')\ntext = text.replace('\\t\\tc.DispatchVehicles[i].VehicleType = c.expandField(\"dispatch_vehicles\", i, \"vehicle_type\", c.DispatchVehicles[i].VehicleType)\\n', '\\t\\tc.DispatchVehicles[i].VehicleType = c.expandField(\"dispatch_vehicles\", i, \"vehicle_type\", c.DispatchVehicles[i].VehicleType)\\n\\t\\tc.DispatchVehicles[i].capacityKgRaw = c.expandField(\"dispatch_vehicles\", i, \"capacity_kg\", c.DispatchVehicles[i].capacityKgRaw)\\n')\ntext = text.replace('\\t\\tv.VehicleType = strings.TrimSpace(v.VehicleType)\\n\\n\\t\\tif v.TenantID == \"\" && v.TenantSubdomain == \"\" && v.TenantContactEmail == \"\" {\\n', '\\t\\tv.VehicleType = strings.TrimSpace(v.VehicleType)\\n\\t\\tv.capacityKgRaw = strings.TrimSpace(v.capacityKgRaw)\\n\\n\\t\\tif v.capacityKgRaw != \"\" {\\n\\t\\t\\tparsed, err := strconv.Atoi(v.capacityKgRaw)\\n\\t\\t\\tif err != nil {\\n\\t\\t\\t\\treturn fieldError(c.path, \"dispatch_vehicles\", i, \"capacity_kg must be an integer\")\\n\\t\\t\\t}\\n\\t\\t\\tv.CapacityKg = parsed\\n\\t\\t}\\n\\n\\t\\tif v.TenantID == \"\" && v.TenantSubdomain == \"\" && v.TenantContactEmail == \"\" {\\n')\npath.write_text(text)\nPY"], decision="allow")
prefix_rule(pattern=["rm", "-rf", "cmd/checkout-expirer-lambda", "cmd/idempotency-janitor-lambda", "cmd/projection-worker-lambda", "cmd/smartra/Dockerfile"], decision="allow")
prefix_rule(pattern=["rm", "-rf", ".cache/go-tmp"], decision="allow")
prefix_rule(pattern=["/bin/zsh", "-lc", "DATABASE_URL=\"postgresql://smartra:smartra@localhost:5442/smartra?sslmode=disable\" go run ./scripts/dev/dev-seed/main.go -env dev"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/dispatch/adapter/http", "-run", "TestDispatchIdempotencyMissingTenantFailsClosed"], decision="allow")
prefix_rule(pattern=["sudo", "chown", "-R", "501:20", "/Users/omitsuhashi/.npm"], decision="allow")
prefix_rule(pattern=["make", "test"], decision="allow")
prefix_rule(pattern=["/bin/zsh", "-lc", "go test ./tests/e2e -count=1 -json > /tmp/e2e.json"], decision="allow")
prefix_rule(pattern=["/bin/zsh", "-lc", "go test -tags e2e ./tests/e2e -count=1 -json > /tmp/e2e.json"], decision="allow")
prefix_rule(pattern=["make", "sqlc-generate"], decision="allow")
prefix_rule(pattern=["uv", "venv"], decision="allow")
prefix_rule(pattern=["uv", "sync"], decision="allow")
prefix_rule(pattern=["mkdir", "-p", "src/domain", "src/usecases", "src/infra/pose", "src/infra/storage", "src/cmd/pose", "docs"], decision="allow")
prefix_rule(pattern=["go", "generate", "./internal/org/di"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/dispatch/...", "./internal/shipping/..."], decision="allow")
prefix_rule(pattern=["rg", "-n", "pydantic", "src", "-S"], decision="allow")
prefix_rule(pattern=["cp", "/tmp/dispatch.yaml", "/Users/omitsuhashi/repos/the3/smartra/doc/definition/openapi/dispatch.yaml"], decision="allow")
prefix_rule(pattern=["make", "build"], decision="allow")
prefix_rule(pattern=["make", "lint", "fmt"], decision="allow")
prefix_rule(pattern=["go", "test", "-tags", "e2e", "./tests/e2e", "-run", "TestDispatchPlanningBoardE2E", "-v"], decision="allow")
prefix_rule(pattern=["make", "test-e2e"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/dispatch/adapter/http"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/checkout/application/command"], decision="allow")
prefix_rule(pattern=["make", "generate"], decision="allow")
prefix_rule(pattern=["/bin/zsh", "-lc", "go test ./tests/e2e -count=1 -v > /tmp/e2e.log 2>&1"], decision="allow")
prefix_rule(pattern=["/bin/zsh", "-lc", "go test ./tests/e2e -count=1 -tags e2e -v > /tmp/e2e.log 2>&1"], decision="allow")
prefix_rule(pattern=["mkdir", "-p", "~/.codex/superpowers"], decision="allow")
prefix_rule(pattern=["bash", "/Users/omitsuhashi/.codex/skills/epic-subissue-runner/scripts/ensure_epic_worktree.sh", "https://github.com/omitsuhashi/smartra/issues/771"], decision="allow")
prefix_rule(pattern=["bash", "/Users/omitsuhashi/.codex/skills/epic-subissue-runner/scripts/list_subissues.sh", "https://github.com/omitsuhashi/smartra/issues/771"], decision="allow")
prefix_rule(pattern=["bash", "/Users/omitsuhashi/.codex/skills/epic-subissue-runner/scripts/ensure_epic_worktree.sh", "https://github.com/omitsuhashi/smartra/issues/765"], decision="allow")
prefix_rule(pattern=["bash", "/Users/omitsuhashi/.codex/skills/epic-subissue-runner/scripts/list_subissues.sh", "https://github.com/omitsuhashi/smartra/issues/765"], decision="allow")
prefix_rule(pattern=["gh", "issue", "view", "https://github.com/omitsuhashi/smartra/issues/766"], decision="allow")
prefix_rule(pattern=["gh", "issue", "view", "https://github.com/omitsuhashi/smartra/issues/772"], decision="allow")
prefix_rule(pattern=["pnpm", "install"], decision="allow")
prefix_rule(pattern=["git", "add", "src/pages-layer/tenant/layout/TenantLayout.tsx", "src/pages-layer/tenant/layout/session-tenant-sync.ts", "src/pages-layer/tenant/layout/session-tenant-sync.test.ts", "src/shared/api/client/server.ts", "src/shared/lib/http/csrf-cookie.ts", "src/shared/lib/http/csrf-cookie.test.ts"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "feat(tenant): sync session tenant on server"], decision="allow")
prefix_rule(pattern=["bash", "/Users/omitsuhashi/.codex/skills/epic-subissue-runner/scripts/close_issue.sh", "https://github.com/omitsuhashi/smartra/issues/772"], decision="allow")
prefix_rule(pattern=["gh", "issue", "view", "https://github.com/omitsuhashi/smartra/issues/773"], decision="allow")
prefix_rule(pattern=["git", "add", "docs/plans/2026-01-24-orders-delivery-requests-api-design.md"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "docs: add orders delivery requests api design"], decision="allow")
prefix_rule(pattern=["git", "check-ignore", "-q", ".worktrees"], decision="allow")
prefix_rule(pattern=["gh", "search", "code", "delivery-requests", "--repo", "omitsuhashi/smartra", "--limit", "20"], decision="allow")
prefix_rule(pattern=["git", "add", ".gitignore"], decision="allow")
prefix_rule(pattern=["gh", "search", "code", "delivery request", "--repo", "omitsuhashi/smartra", "--limit", "20"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "chore: ignore .worktrees directory"], decision="allow")
prefix_rule(pattern=["gh", "search", "code", "DeliveryRequest", "--repo", "omitsuhashi/smartra", "--limit", "20"], decision="allow")
prefix_rule(pattern=["git", "checkout", "--", ".gitignore"], decision="allow")
prefix_rule(pattern=["git", "add", "docs/plans/2026-01-24-orders-delivery-requests-api-implementation.md"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "docs: add orders delivery requests implementation plan"], decision="allow")
prefix_rule(pattern=["git", "add", "docs/plans/2026-01-24-orders-delivery-requests-api-hooks.md", "src/entities/orders-delivery-requests", "src/features/orders-delivery-requests"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "feat(orders): add delivery request api and hooks"], decision="allow")
prefix_rule(pattern=["bash", "/Users/omitsuhashi/.codex/skills/epic-subissue-runner/scripts/close_issue.sh", "https://github.com/omitsuhashi/smartra/issues/773"], decision="allow")
prefix_rule(pattern=["git", "rev-parse", "--show-toplevel"], decision="allow")
prefix_rule(pattern=["gh", "issue", "view", "https://github.com/omitsuhashi/smartra/issues/774"], decision="allow")
prefix_rule(pattern=["/bin/zsh", "-lc", "OPENAPI_DIR=/Users/omitsuhashi/repos/the3/smartra/doc/definition/openapi SCHEMA_DIR=/Users/omitsuhashi/repos/the3/smartra/doc/definition/schema make oapi-generate"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/order/adapter/http", "-run", "TestOrdersListDeliveryRequests"], decision="allow")
prefix_rule(pattern=["git", "add", "internal/order/adapter/http/endpoint.go", "internal/order/adapter/http/endpoint_test.go"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "feat: add orders delivery requests stub handler"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/order/adapter/http", "-run", "TestOrdersRoutePolicyResolver_CoversAllOperations"], decision="allow")
prefix_rule(pattern=["git", "add", "internal/order/adapter/http/router.go", "internal/order/adapter/http/router_test.go", "internal/order/adapter/http/operation_ids.go", "internal/order/adapter/http/policies.go", "internal/order/adapter/http/ifmatch.go"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "feat: add orders http router and policies"], decision="allow")
prefix_rule(pattern=["go", "test", "./internal/platform/di", "-run", "TestRegisterHTTPRoutes_RegistersOrdersDeliveryRequests"], decision="allow")
prefix_rule(pattern=["git", "add", "internal/order/di/container.go", "internal/platform/di/wire_http.go", "internal/platform/di/wire_http_test.go", "internal/order/adapter/http/operation_ids.go"], decision="allow")
prefix_rule(pattern=["git", "add", "docs/plans/2026-01-24-orders-delivery-requests-list.md", "src/pages-layer/tenant/orders/TenantDeliveryRequestListPage.tsx", "src/pages-layer/tenant/orders/__tests__/TenantDeliveryRequestListPage.test.tsx"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "feat: wire orders http container"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "feat(orders): connect delivery request list to api"], decision="allow")
prefix_rule(pattern=["rm", "-f", "/Users/omitsuhashi/Library/Caches/smartra/sqlc.digest"], decision="allow")
prefix_rule(pattern=["/bin/zsh", "-lc", "OPENAPI_DIR=/Users/omitsuhashi/repos/the3/smartra/doc/definition/openapi SCHEMA_DIR=/Users/omitsuhashi/repos/the3/smartra/doc/definition/schema make generate"], decision="allow")
prefix_rule(pattern=["git", "add", "internal/platform/di/wire_http_test.go"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "test: fix orders route registration test"], decision="allow")
prefix_rule(pattern=["git", "add", "docs/plans/2026-01-24-orders-delivery-requests-actions-design.md"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "docs(orders): add delivery request actions design"], decision="allow")
prefix_rule(pattern=["git", "add", "/Users/omitsuhashi/repos/the3/smartra/backend/issue/orders-delivery-requests-epic-765.md"], decision="allow")
prefix_rule(pattern=["git", "add", "issue/orders-delivery-requests-epic-765.md"], decision="allow")
prefix_rule(pattern=["git", "add", "-f", "issue/orders-delivery-requests-epic-765.md"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "chore: update epic 765 checklist"], decision="allow")
prefix_rule(pattern=["/Users/omitsuhashi/.codex/skills/epic-subissue-runner/scripts/close_issue.sh", "https://github.com/omitsuhashi/smartra/issues/766"], decision="allow")
prefix_rule(pattern=["gh", "issue", "view", "https://github.com/omitsuhashi/smartra/issues/767"], decision="allow")
prefix_rule(pattern=["git", "add", "docs/plans/2026-01-24-orders-delivery-requests-actions.md", "src/pages-layer/tenant/orders/TenantDeliveryRequestListPage.tsx", "src/pages-layer/tenant/orders/TenantDeliveryRequestDetailPage.tsx", "src/pages-layer/tenant/orders/__tests__/TenantDeliveryRequestListPage.test.tsx", "src/pages-layer/tenant/orders/__tests__/TenantDeliveryRequestDetailPage.test.tsx"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "feat(orders): wire delivery request actions"], decision="allow")
prefix_rule(pattern=["git", "add", "docs/plans/2026-01-24-orders-delivery-requests-detail-design.md"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "docs(orders): add delivery request detail design"], decision="allow")
prefix_rule(pattern=["git", "add", "docs/plans/2026-01-24-orders-delivery-requests-list-design.md"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "docs: add orders delivery requests list design"], decision="allow")
prefix_rule(pattern=["git", "add", "docs/plans/2026-01-24-orders-delivery-requests-list-implementation.md"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "docs: add orders delivery requests list implementation plan"], decision="allow")
prefix_rule(pattern=["git", "add", "internal/order/adapter/http/cursor.go", "internal/order/adapter/http/cursor_test.go"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "feat: add orders list cursor codec"], decision="allow")
prefix_rule(pattern=["git", "add", "src/pages-layer/tenant/orders/TenantDeliveryRequestDetailPage.tsx", "src/pages-layer/tenant/orders/__tests__/TenantDeliveryRequestDetailPage.test.tsx", "docs/plans/2026-01-24-orders-delivery-requests-detail.md"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "feat(orders): load delivery request detail from api"], decision="allow")
prefix_rule(pattern=["git", "add", "internal/order/application/query/list_delivery_requests.go", "internal/order/application/query/list_delivery_requests_test.go", "internal/order/application/query/errors.go", "internal/order/application/port/outbound/delivery_request_repository.go", "internal/order/application/port/outbound/unit_of_work.go"], decision="allow")
prefix_rule(pattern=["git", "add", "docs/plans/2026-01-24-orders-delivery-requests-e2e-design.md"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "feat: add orders delivery request query handler"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "docs(e2e): add delivery request smoke test design"], decision="allow")
prefix_rule(pattern=["git", "add", "e2e/delivery-requests.spec.ts", "docs/plans/2026-01-24-orders-delivery-requests-e2e.md"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "test(e2e): add delivery requests list-to-detail smoke"], decision="allow")
prefix_rule(pattern=["git", "add", "-f", "internal/order/infra/persistence/postgres/dbgen"], decision="allow")
prefix_rule(pattern=["git", "commit", "-m", "feat: implement orders delivery requests list"], decision="allow")
